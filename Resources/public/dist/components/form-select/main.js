define([],function(){"use strict";var a={visibleItems:999,instanceName:null,idsParameter:"ids",preselected:null,idKey:"id",titleKey:"title",resultKey:"",translations:{overlayTitle:"form-select.title",noTitle:"public.no-title"}},b={skeleton:function(a){return['<div class="single-internal-link container form-element" id="',a.ids.container,'">','   <a class="fa-tasks icon action choose" href="#" id="',a.ids.button,'"></a>','   <a class="fa-times-circle clear" href="#" id="',a.ids.clearButton,'"></a>','   <input type="text" class="form-element preview-update trigger-save-button" readonly="readonly" id="',a.ids.input,'"/>',"</div>"].join("")},data:function(a){return['<div id="',a.ids.list,'"/>'].join("")}},c=function(a){return"#"+this.options.ids[a]},d=function(){if(this.options.ids={container:"form-select-"+this.options.instanceName+"-container",input:"form-select-"+this.options.instanceName+"-input",button:"form-select-"+this.options.instanceName+"-button",clearButton:"form-select-"+this.options.instanceName+"-clear-button",list:"single-internal-link-"+this.options.instanceName+"-list"},this.sandbox.dom.html(this.$el,b.skeleton(this.options)),this.$container=this.sandbox.dom.find(c.call(this,"container"),this.$el),this.$input=this.sandbox.dom.find(c.call(this,"input"),this.$el),this.$button=this.sandbox.dom.find(c.call(this,"button"),this.$el),this.sandbox.dom.data(this.$el,"form-select")){var a=this.sandbox.dom.data(this.$el,"form-select");e.call(this,a)}else e.call(this,this.options.preselected);f.call(this),h.call(this),g.call(this)},e=function(a){this.data=a,this.sandbox.dom.data(this.$el,"form-select",this.data),a?$("#"+this.options.ids.clearButton).show():$("#"+this.options.ids.clearButton).hide()},f=function(){},g=function(){this.sandbox.dom.on("#"+this.options.ids.clearButton,"click",function(){return e.call(this,""),this.$input.val(""),!1}.bind(this))},h=function(){var a=this.sandbox.dom.createElement("<div/>");this.sandbox.dom.append(this.$el,a),this.sandbox.start([{name:"overlay@husky",options:{triggerEl:this.$el,cssClass:"form-select-overlay",el:a,container:this.$el,removeOnClose:!1,instanceName:"form-select."+this.options.instanceName,slides:[{title:this.sandbox.translate(this.options.translations.overlayTitle),data:b.data(this.options),buttons:[{type:"cancel"}]}]}}])};return{initialize:function(){this.options=this.sandbox.util.extend({},a,this.options),d.call(this)}}});